# instance = serializer.instance
        # data = self.request.data

        # expiration_model = models.ProductExpirationLog.objects.filter(
        #     product__id=instance.id
        # ).first()

        # diff_quantity = data.get('quantity', 0) - instance.quantity

        # if data.get('expiration', '') == '':
        #     expiration_model.quantity += diff_quantity
        #     expiration_model.save()
        #     return super().perform_update(serializer)

        # if str(instance.expiration) != data.get('expiration'):
        #     new_expiration_model = models.ProductExpirationLog.objects.create(
        #         product=instance,
        #         quantity=diff_quantity,
        #         expiration=data.get('expiration')
        #     )

        #     new_expiration_model.save()

        # else:
        #     actual_expiration_model = models.ProductExpirationLog.objects.filter(
        #         expiration=data.get('expiration')
        #     ).first()
        #     actual_expiration_model.quantity += diff_quantity
        #     actual_expiration_model.save()


        # before_expiration_model = models.ProductExpirationLog.objects.filter(
        #     product__id=serializer.instance.id
        # ).first()

        # old_quantity = serializer.instance.quantity
        # data = super().perform_update(serializer)
        # new_quantity = serializer.instance.quantity

        # diff_quantity = new_quantity - old_quantity
        # analyze_expiration(before_expiration_model, serializer, diff_quantity)
